<%= form_with(model: intervention) do |form| %>
  <% if intervention.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(intervention.errors.count, "error") %> prohibited this intervention from being saved:</h2>

      <ul>
        <% intervention.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>



 
  <div>
    <%= form.label :customer_id, class: "form-label" %>
    <%= form.select :customer_id, options_for_select(@customers.collect { |customers| [customers.id] }, 1), {}, { id: 'customers_select' } %>
  </div>

  <div>
    <%= form.label :building_id, class: "form-label" %>
    <%= form.select :building_id, options_for_select(@buildings.collect { |buildings| [buildings.id] }, 0), {}, { id: 'buildings_select' } %>
  </div>


  <script>
    $('#customers_select').change(function() {
        $.ajax({
            url: 'interventions/update_buildings',
            type: 'GET',
            data: {
                customer_id: $("#customers_select option:selected").val()
  
            },
            success: function(cities) {
                // console.log(data)
                // Clear all options from course select
                $("select#cities_select option").remove();
                //put in a empty default line
                var row = "<option value=\"" + "" + "\">" + "select your city" + "</option>";
                $(row).appendTo("select#cities_select");

                // Fill course select
                $.each(cities, function(i, city) {
                    console.log(city)
                    row = "<option value=\"" + city.id + "\">" + city.name + "</option>";
                    $(row).appendTo("select#cities_select");
                });
            }
        
    })
})




</script>






  <div>
    <%= form.label :battery_id, style: "display: block" %>
    <%= form.text_field :battery_id %>
  </div>

  <div>
    <%= form.label :column_id, style: "display: block" %>
    <%= form.text_field :column_id %>
  </div>

  <div>
    <%= form.label :TEST, style: "display: block" %>
    <%= form.text_field :elevator_id %>
  </div>

  <div>
    <%= form.label :employee_id, style: "display: block" %>
    <%= form.text_field :employee_id %>
  </div>

  <div>
    <%= form.label :start_date_and_time_of_the_intervention, style: "display: block" %>
    <%= form.datetime_field :start_date_and_time_of_the_intervention %>
  </div>

  <div>
    <%= form.label :end_date_and_time_of_the_intervention, style: "display: block" %>
    <%= form.datetime_field :end_date_and_time_of_the_intervention %>
  </div>

  <div>
    <%= form.label :result, style: "display: block" %>
    <%= form.text_field :result %>
  </div>

  <div>
    <%= form.label :report, style: "display: block" %>
    <%= form.text_area :report %>
  </div>

  <div>
    <%= form.label :status, style: "display: block" %>
    <%= form.text_field :status %>
  </div>

  <div>
    <%= form.submit %>
  </div>
<% end %>
